# Jalankan Jenkins on top docker

Install docker terlebih dahulu,
setelah itu, kita akan menginstall jenkins menggunakan docker compose

buat file docker composenya terlebih dahulu
![image](https://user-images.githubusercontent.com/36489276/206492361-6ca98647-87ed-4c66-b0c9-a7f53a72a4fe.png)


isikan kurang lebih sebagai berikut
![image](https://user-images.githubusercontent.com/36489276/206492072-9c5eca1c-7ab4-4714-85ad-db737789f5e8.png)

build file docker composenya
![image](https://user-images.githubusercontent.com/36489276/206493456-0d634a2b-61ff-46b0-9a62-8194968a8caf.png)

setelah container berhasil di build, kita akan melakukan konfigurasi pada jenkins.
kita perlu mengcopy password jenkins untuk setup
gunakan perintah 
```
docker container logs nama_container
```
![image](https://user-images.githubusercontent.com/36489276/206495373-9831195c-4a82-45ab-8fe9-42daa789de1d.png)

untuk masuk ke dashborad jenkins, gunakan ip publik dan tambahkan port yang sudah disetel, setelah masuk, paste 
![image](https://user-images.githubusercontent.com/36489276/206496162-9143dc0f-51fb-46c3-a6ba-797e2508314d.png)

setelah itu, kita perlu menginstall ssh agent, pilih select plugin to install
![image](https://user-images.githubusercontent.com/36489276/206497089-3941bb6c-ee84-4e21-9db6-1a4ec59db57c.png)

piih ssh agent
![image](https://user-images.githubusercontent.com/36489276/206498117-aeb5d08a-641a-4f6f-8a07-f565a0e399e6.png)

tunggu proses instalasi selesai
![image](https://user-images.githubusercontent.com/36489276/206498226-6b3bb326-1806-4c48-820b-3586a87320bb.png)

set up username, password, fullname dan email addres
![image](https://user-images.githubusercontent.com/36489276/206498951-bbce3abb-8eeb-44c4-9528-13e1da0e5c79.png)

kita akan melakukan setup proxy nanti, pilih save and finish
![image](https://user-images.githubusercontent.com/36489276/206499492-5e5fcb65-8b49-448f-a7eb-95309feab113.png)

# setup ssh
kita perlu setup ssh terlebih dahulu di virtual machine kita
```
ssh-keygen
```
![image](https://user-images.githubusercontent.com/36489276/206378634-655b8182-8bee-4688-a36d-41b8182bbb9c.png)
sesuaikan direktori ssh yang ingin disimpan, dan sesuaikan passphrase yang diinginkan, saya akan membiarkan default

## Setup unuk github
pada tambhilan home github, klik logo profile kita lalu klik settings

![image](https://user-images.githubusercontent.com/36489276/206379166-6aa0c1b2-92b2-4a79-9949-4b4912ec9237.png)

pilih SSH dan GPG keys
![image](https://user-images.githubusercontent.com/36489276/206379275-0acb8afe-f83b-4e55-8710-2428e2c76091.png)

lalu klik new SSH keys
![image](https://user-images.githubusercontent.com/36489276/206379544-f13f0aa3-bcf8-422f-9f5d-df0a780317e1.png)

title sesuaikan dengan keinginan,
untuk key masukan public key dari ssh yang sudah kita generate di virtual machine kita lalu klik add keys
![image](https://user-images.githubusercontent.com/36489276/206380320-a35639c5-0137-41fe-8eb2-0a238b4c536d.png)

```
cat lokasi_file_gembok_ssh.pub
```
![image](https://user-images.githubusercontent.com/36489276/206379980-81ab867f-1f15-46e2-835a-04739ea48269.png)

SSH keys sudah ditambahkan
![image](https://user-images.githubusercontent.com/36489276/206380683-21edde7f-2b0b-4909-adf5-4a7938351d53.png)

## setup ssh untuk jenkins

pilih manage jenkins
![image](https://user-images.githubusercontent.com/36489276/206382002-069afbde-230c-419f-9dac-f732a78ae61b.png)

lalu pilih manage credentials
![image](https://user-images.githubusercontent.com/36489276/206382123-223f10e3-4142-40e1-9a86-1e7d6e0efa81.png)

klik system
![image](https://user-images.githubusercontent.com/36489276/206382682-d5251e35-b4a5-446d-bbaf-e6d7f304ec12.png)

klik global credentials (unrestricted)
![image](https://user-images.githubusercontent.com/36489276/206382814-1cb7c6a1-cbe5-4b5c-a28c-cea28413c66d.png)

pilih add credentials
![image](https://user-images.githubusercontent.com/36489276/206382859-2cb90a2f-c06a-47d2-8536-86eac7c26faf.png)

untuk kind, pilih ssh username with private keys, id dan description dan name gunakan sesuai kebutuhan
![image](https://user-images.githubusercontent.com/36489276/206383615-9fe0fc59-cb44-450a-8060-b3899ce6be8a.png)

untuk private key, pilih enter directly dan masukan private key yang sudah kita generate
```
cat lokasi_kunci_ssh
```
![image](https://user-images.githubusercontent.com/36489276/206384167-be675843-45ce-405c-9341-86fdbd267564.png)

![image](https://user-images.githubusercontent.com/36489276/206383962-4ea6f124-447c-4f05-981f-942ff9d6d375.png)

ssh berhasil ditambahkan
![image](https://user-images.githubusercontent.com/36489276/206384432-4165d491-42c6-43ba-a224-6e50765ed481.png)

# Setup github webhook

pada project yang sudah kita fork, masuk ke bagian setting
![image](https://user-images.githubusercontent.com/36489276/206505171-92b419dd-f9b0-4646-8d20-4a69a37a8966.png)

klik menu webhook
![image](https://user-images.githubusercontent.com/36489276/206505572-19722d33-4427-4fa7-9a2c-42efa308f7c6.png)

pilih, add webhook
![image](https://user-images.githubusercontent.com/36489276/206505754-15a92f92-d590-4fb8-91e6-a28f7f5e6acb.png)

masukan ip/domain yang sudah di reverse proxy untujk jenkins
![image](https://user-images.githubusercontent.com/36489276/206506916-e00c5e7a-3cef-4fa6-ae75-56595d1af2d3.png)

# pipeline untuk frontend dan backend

untuk membuat sebuah pipeline baru, klik create a job
![image](https://user-images.githubusercontent.com/36489276/206452340-5d06e03e-7f95-458f-af34-90612b2a0e8a.png)

masukan nama, dan pilih pipeline
![image](https://user-images.githubusercontent.com/36489276/206455553-f4e16549-e29c-4150-930a-8266e41e8eee.png)

pada build trigger, klik "GitHub hook trigger for GITScm polling"
![image](https://user-images.githubusercontent.com/36489276/206455852-14adbf53-695e-4642-8bfa-d3e199e18a83.png)

pada menu pipeline
untuk definition pilih pipeline script from SCM,
scm pilih git
lalu masukan 

![image](https://user-images.githubusercontent.com/36489276/206470299-6d1c8c19-21d1-45ce-8557-89ac38d76800.png)

masukan script path untuk jenkins
![image](https://user-images.githubusercontent.com/36489276/206470790-2fe3a22c-81cb-4627-b476-5ae0c3c0e723.png)

matikan lightweight checkout jenkins

# Push dari repository lokal ke repository github

kita akan melakukan git push ke github dari direktori housy_frontend yang ada di virtual machine.

tambahkan konfigurasi username dan email kita sebelum melakukan proses push
```
git config --global user.email "email"
git config --global user.name "password"
```
![image](https://user-images.githubusercontent.com/36489276/206459836-7518d25b-b7b7-47dc-82b9-0edb98362dcd.png)

tambahkan git add . untuk memindahkan semua kode dari working directory ke staging area
```
git add . 
```
![image](https://user-images.githubusercontent.com/36489276/206459934-326b5270-aefc-4a56-85c9-625211d6882e.png)

lakukan perintah commit untuk memindahkan dari staging area ke repository
```
git commit -m "pesan"
```
![image](https://user-images.githubusercontent.com/36489276/206461066-0ed857da-7d77-4d74-8395-060a09422201.png)

gunakan git branch untuk membuat branch main
```
git branch -M main
```
![image](https://user-images.githubusercontent.com/36489276/206461370-36d65d8b-c5b5-4f63-9964-b0e77c4657dd.png)

lalu kita tambahkan remote agar repository git dan repository github saling terhubung
```
git remote add origin https/ssh_git
```
![image](https://user-images.githubusercontent.com/36489276/206463191-b78f759f-93f4-4bd0-a66d-15ce66b79744.png)

lakukkan step yang sama untuk backend
